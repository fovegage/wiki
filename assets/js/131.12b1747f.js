(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{476:function(e,s,t){"use strict";t.r(s);var a=t(15),r=Object(a.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[e._v("#")]),e._v(" 说明")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# 使用改值对日志进行标志，可以过滤出本次请求的日志（便于单个微服务快速定位问题）\n当您操作客户端访问的 WebService 时，可能难以将请求（客户端可以看到）与服务器日志（服务端可以看到）相关联。\nX-Request-id 的想法是客户端可以创建一些随机 ID 并将其传递给服务器。 然后，服务端在其创建的每个日志语句中包含该 ID。 如果客户端收到错误，它可以在错误报告中包含 ID，允许服务端开发者查找相应的日志语句（而无需依赖时间戳，IPS等）。\n由于此 ID 由客户端随机生成，因此它不包含任何敏感信息，也不会侵犯用户的隐私。 由于每个请求创建的 ID 唯一，因此它对追踪用户信息毫无帮助。\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br")])]),s("h2",{attrs:{id:"入口系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#入口系统"}},[e._v("#")]),e._v(" 入口系统")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# 使用apisix的 x-request-id\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h2",{attrs:{id:"内部系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内部系统"}},[e._v("#")]),e._v(" 内部系统")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# https://github.com/mercari/go-grpc-interceptor/blob/master/xrequestid/README.md\n# 在拦截器中添加 request_id 或者使用链路追踪的id\n# 在 metadata 里面设置字段\nservice_name、request_id、error_msg\n\nimport grpc\nchannel = grpc.insecure_channel('your_server_address')\nmetadata = [('X-Request-id', 'your_request_id')]\nstub = YourServiceStub(channel)\nresponse = stub.YourRpcMethod(request, metadata=metadata)\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://obsidian-foveagge.oss-cn-beijing.aliyuncs.com/blog/XUVBb6.png",alt:""}})]),e._v(" "),s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://blog.51cto.com/muzinan110/6021416",target:"_blank",rel:"noopener noreferrer"}},[e._v("Istio可观测性(链路)"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://stackoverflow.com/questions/25433258/what-is-the-x-request-id-http-header",target:"_blank",rel:"noopener noreferrer"}},[e._v("What is the X-REQUEST-ID http header?"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://blog.csdn.net/yongwan5637/article/details/90898556",target:"_blank",rel:"noopener noreferrer"}},[e._v("对Request-ID的一些认识"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);