(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{410:function(s,n,a){"use strict";a.r(n);var e=a(15),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"授权模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#授权模式"}},[s._v("#")]),s._v(" 授权模式")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# https://zhuanlan.zhihu.com/p/92051359 （详细）\n# https://www.ruanyifeng.com/blog/2014/05/oauth_2_0.html\n\n# 适用于三方应用场景，最严谨的校验模式\n授权码模式：https://wx.qq.com/oauth/authorize?response_type=code&client_id=javaboy&redirect_uri=www.javaboy.org&scope=all\n# 适用于集团内部场景，用户向客户端提供用户名和密码\n密码模式：https://wx.qq.com/oauth/authorize?response_type=password&client_id=javaboy&username=%E6%B1%9F%E5%8D%97%E4%B8%80%E7%82%B9%E9%9B%A8&password=123\n# 适用于开发平台API场景，客户端从平台申请 client_id 和 client_secret, 请求请直接返回token \n客户端模式： https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&client_id=APPID&client_secret=APPSECRET\n# 相比授权码模式省略了code\n简化模式： https://api.weixin.qq.com/cgi-bin/token?grant_type=token\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://obsidian-foveagge.oss-cn-beijing.aliyuncs.com/blog/Eve6kH.png",alt:""}}),s._v(" "),n("img",{attrs:{src:"https://obsidian-foveagge.oss-cn-beijing.aliyuncs.com/blog/pHmXVJ.png",alt:""}})]),s._v(" "),n("h2",{attrs:{id:"授权码模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#授权码模式"}},[s._v("#")]),s._v(" 授权码模式")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('https://zhuanlan.zhihu.com/p/347683336\n\n1. 授权服务器  用户名+密码登录进行授权 返回token\n2. 资源服务器  获取到token，拿着token去获取资源\n\n# 第一步（网站调起下面的网址）\nhttps://wx.qq.com/oauth/authorize?response_type=code&client_id=javaboy&redirect_uri=www.javaboy.org&scope=all\n\n# 第二步  在上一步完成登录后会重定向code, 鉴权服务器向调用方进行回掉   服务方监听，收到进行处理\nhttps://client.example.com/cb?code=SplxlOBeZQQYbYS6WxSbIA&state=xyz\n\n# 第三步  网站服务器收到code, 再次向鉴权服务器发送请求，鉴权服务器返回 token 信息  通过 scope 进行资源的限制\nhttps://api.weixin.qq.com/sns/oauth2/access_token?appid=APPID&secret=SECRET&code=CODE&grant_type=authorization_code\n{ \n"access_token":"ACCESS_TOKEN", \n"expires_in":7200, \n"refresh_token":"REFRESH_TOKEN",\n"openid":"OPENID", \n"scope":"SCOPE",\n"unionid": "o6_bmasdasdsad6_2sgVt7hMZOPfL"\n}\n\n# 第四步  得到上一步的信息，说明登录成功，通过access_token 请求资源服务器\n比如微信： 可以拿着 access_token  去获取 头像信息   可以访问的资源信息\n拿到信息  判断是否注册了网站 \n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h2",{attrs:{id:"密码模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#密码模式"}},[s._v("#")]),s._v(" 密码模式")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# 密码模式一般用于集团内部的权限，由于知道了密码，因此省略了用户鉴权的过程\n\n# 第一步\nhttp://localhost:7654/oauth/token?username=gage&password=123456&scope=all&grant_type=password&client_id=vpnbook&client_secret=xxxx\n{\n  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJnYWdlIiwic2NvcGUiOlsiYWxsIl0sImV4cCI6MTY4Nzg0NzYxMywiYXV0aG9yaXRpZXMiOlsiL3YyIl0sImp0aSI6IjkzOWUwZWVkLTRiOGYtNGYwOC1hMDU4LTE5NjBhYjc1YzBhZiIsImNsaWVudF9pZCI6InZwbmJvb2siLCJlbmhhbmNlIjoiVnBuQm9vayBGbG93IEF1dGgifQ.bzG5WeG0gCKScZVNN3qMHl1kX_uTjEhF8YwYgPK12ak",\n  "token_type": "bearer",\n  "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX25hbWUiOiJnYWdlIiwic2NvcGUiOlsiYWxsIl0sImF0aSI6IjkzOWUwZWVkLTRiOGYtNGYwOC1hMDU4LTE5NjBhYjc1YzBhZiIsImV4cCI6MTY4OTgzNDgxMywiYXV0aG9yaXRpZXMiOlsiL3YyIl0sImp0aSI6IjFkM2VhNDlmLWJmMmUtNGE4ZS1iMDVlLTJhYzZiZWZmYjNlNyIsImNsaWVudF9pZCI6InZwbmJvb2siLCJlbmhhbmNlIjoiVnBuQm9vayBGbG93IEF1dGgifQ.WLNtzfuCnNiOBXp1-6pG_UaygeeH9rcAO3x6hRS18Yg",\n  "expires_in": 604799,\n  "scope": "all",\n  "enhance": "VpnBook Flow Auth",\n  "jti": "939e0eed-4b8f-4f08-a058-1960ab75c0af"\n}\n\n# 第二步\n得到上一步的信息，说明登录成功，通过access_token 请求资源服务器\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h2",{attrs:{id:"扩展"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#扩展"}},[s._v("#")]),s._v(" 扩展")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 如何将oauth2.0引入集团内部产品，scope和level如何划分\n目录使用 oauth2.0管理\n会员等级\n\n# 两个权限\nclient权限 （百度网盘授权后的权限）\n    1. \nuser权限\n    1. 会员等级\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"参考"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# gitee\nhttps://gitee.com/api/v5/oauth_doc#/\n# 微信\nhttps://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_webpage_authorization.html\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);