## 方案

- 构建
```
# 内置变量：CI_JOB_TOKEN，会自动传入（写在gitlab-ci.yaml中）
docker build --build-arg CI_JOB_TOKEN=$CI_JOB_TOKEN -f Dockerfile -t $some_tag .
```
- docker

```yaml
ARG CI_JOB_TOKEN

ENV CI_JOB_TOKEN=$CI_JOB_TOKEN

RUN git config \
--global url."https://gitlab-ci-token:${CI_JOB_TOKEN}@gitlab.private/group".insteadOf \
"git@gitlab.private:group"
```

## 参考

- [Go + Docker技巧-私人仓库和Gitlab CI](https://juejin.cn/post/7166171734754721829)